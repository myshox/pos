# STUDIO MOGU POS — 功能擴充建議（完整版）

> 依「專業完整度」與「實務需求」整理的建議清單，可依預算與時程分階段實作。

---

## 一、目前已有功能總覽

| 區塊 | 功能 | 狀態 |
|------|------|------|
| 前台 | 櫃位結帳、購物車、三種付款、收據（複製/列印） | ✅ |
| 後台 | 商品 CRUD、上下架、分類、圖片 | ✅ |
| 訂單 | 列表、搜尋、日期篩選、收據、編輯、刪除 | ✅ |
| 營收報表 | 日/周/月/自訂區間、付款統計、產品分析、分類營收 | ✅ |
| 系統 | 繁中/韓/英、手機/平板/桌機響應式、Toast 提示 | ✅ |
| 資料 | 全部存於瀏覽器 localStorage | ✅ |

---

## 二、高優先 — 建議一定要有（資料安全與營運必要）

### 1. 資料備份與還原

**原因：** 目前資料只存在單一裝置的 localStorage，清除快取、換裝置、重灌就全部消失。

**建議實作：**

- **匯出備份**：一鍵下載「全部資料」為單一 JSON 檔（商品 + 分類 + 訂單）。
- **匯入還原**：選擇 JSON 檔上傳，覆蓋或合併現有資料（可加確認步驟）。
- **定期提醒**：例如進入後台時若超過 7 天未備份，顯示輕量提示「建議下載備份」。

**效益：** 資料可攜、可還原，符合「完整」與「可長期使用」的期待。

---

### 2. 營收／訂單匯出（CSV / Excel 友善）

**原因：** 報稅、記帳、給會計通常需要 Excel 或可貼上的表格，而不是只能在網頁看。

**建議實作：**

- **營收報表匯出**：依目前選擇的區間（日/周/月/自訂）匯出「營收摘要 + 訂單明細」為 CSV（UTF-8 BOM 讓 Excel 正確開中文）。
- **訂單紀錄匯出**：依目前篩選條件（全部/今天/本週/自訂區間）匯出訂單列表為 CSV。
- 欄位建議：日期時間、訂單編號、金額、付款方式、備註、商品明細（可合併為一欄或多欄）。

**效益：** 報表可存檔、可交給會計、可做年度整理，系統才算「完整可營運」。

---

### 3. 後台進入保護（簡易 PIN 或密碼）

**原因：** 櫃位結帳頁可被任何人操作，後台可改價、刪訂單，需要基本防護。

**建議實作：**

- 首次使用設定一組 **4～6 位數 PIN** 或簡短密碼，存於 localStorage（或之後改存後端）。
- 從「櫃位結帳」點「後台」時，先要求輸入 PIN，正確才進入後台。
- 可選：同一裝置 N 分鐘內免再輸入（session）。

**效益：** 避免路人或工讀生誤改資料，符合「完整 POS」的合理期待。

---

## 三、中優先 — 讓系統更完整、更好用

### 4. 折扣與優惠

**原因：** 市集常有「滿額折」「活動價」「會員價」，沒有折扣功能就不算完整。

**建議實作：**

- **整筆訂單折扣**：結帳前可選「不打折 / 滿 XXX 折 XX 元」或「打 X 折」；結帳金額 = 原價 − 折扣，收據與報表顯示「原價、折扣、實收」。
- **單品特價（選用）**：商品可設「原價 + 促銷價」，結帳時以促銷價計算；或保留「手動改價」一欄（需權限）。

**效益：** 支援活動與促銷，報表仍可區分原價與實收，數據清楚。

---

### 5. 簡易庫存（選用）

**原因：** 文創雖多為「單件/少量」，但若部分商品有數量（如明信片、貼紙），庫存可避免超賣與盤點混亂。

**建議實作：**

- 商品新增欄位：「啟用庫存」勾選、**庫存數量**。
- 結帳時：若該商品啟用庫存，檢查數量是否足夠；足夠則自動扣減，不足則提示並禁止結帳（或改為「允許負庫存」選項）。
- 後台：庫存列表可篩選「低於 N 件」、手動調整數量；報表可加「庫存異動紀錄」或僅顯示當前庫存。

**效益：** 有數量型商品時可完整管理，不影響純「單件販售」商品。

---

### 6. 收據與店鋪資訊完整化

**原因：** 收據若只有店名與訂單內容，對報帳、退換貨、客訴較不完整。

**建議實作：**

- 後台「店鋪設定」：店名、電話、地址（可選）、統編（選填，給需要打統編的客人）。
- 收據上方：顯示店名、電話、地址；若訂單有統編則顯示「統編：XXXXXX」。
- 收據下方：保留感謝語，可加「退換貨說明」或「營業時間」等一段固定文字（後台可編輯）。

**效益：** 收據即完整「購買憑證」，符合實務與「完整」期待。

---

### 7. 日結／關帳概念（可選）

**原因：** 部分店家習慣「每日關帳」做為結算點，與「營收報表日結」略有不同。

**建議實作：**

- 「今日營業」旁加「日結單」按鈕：產出當日摘要（營收、筆數、付款方式、前幾大商品），可列印或匯出 PDF/CSV。
- 可選：標記「已日結」日期，之後僅允許補單、不建議改已日結訂單（或改動時需二次確認）。

**效益：** 與實務記帳習慣對齊，報表與日結一致。

---

## 四、可選 — 依實際需求再考慮

### 8. 發票／統編

- 若需正式電子發票，需串接財政部或加值中心 API，實作成本高。
- 短期可僅在收據與訂單上顯示「統編」欄位（手動輸入），不開立正式發票，已能滿足多數 B2B 留底需求。

### 9. 會員／顧客

- 若需會員點數、累積消費、會員價，可新增「顧客」資料（姓名/電話/備註）與訂單關聯。
- 文創小攤若以一次性消費為主，可延後再做。

### 10. 多裝置同步

- 目前為單機 localStorage，若要多台平板/手機同時結帳且資料一致，需改為後端資料庫 + API 或即時同步服務（如 Firebase/Supabase）。
- 屬於架構升級，建議在「備份／匯出」穩定後再規劃。

### 11. PWA / 離線安裝

- 將網站設為「可安裝到手機桌面」、離線仍可開結帳頁（快取），需 Service Worker 與 manifest。
- 對市集現場網路不穩時有幫助，可列為體驗優化。

### 12. 操作紀錄（審計）

- 記錄「誰在何時改了訂單/商品」（需先有登入或操作者代號）。
- 單人使用可省略；若未來有多人共用後台再考慮。

---

## 五、建議實作順序（要很完整時）

1. **第一階段（必做）**  
   - 資料備份與還原（匯出/匯入 JSON）  
   - 營收與訂單匯出 CSV  
   - 後台 PIN 保護  

2. **第二階段（完整營運）**  
   - 店鋪設定 + 收據完整化（店名/電話/地址/統編）  
   - 整筆訂單折扣（滿額折 or 比例折）  

3. **第三階段（依需求）**  
   - 簡易庫存  
   - 日結單列印/匯出  
   - 單品促銷價或手動改價  

4. **之後再考慮**  
   - 會員、發票、多裝置同步、PWA、審計紀錄  

---

## 六、小結

「很完整」的 POS 至少應具備：

- 資料不因裝置而消失 → **備份／還原**  
- 能交給會計與報稅 → **CSV 匯出**  
- 避免被隨意改動 → **後台保護**  
- 收據可當正式憑證 → **收據與店鋪資訊完整**  
- 支援促銷與日常營運 → **折扣**（與選配的庫存）  

以上依序實作後，系統即可達到「完整、可長期營運」的專業水準。若你告訴我優先想做哪幾項（例如：先做備份 + CSV + PIN），我可以依你現有程式結構給出具體實作步驟或直接幫你規劃程式碼修改點。
